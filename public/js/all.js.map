{"version":3,"sources":["alert-popup.js","footer.js","form-validations.js","login-popup.js","select2.js","tables.js","tournament.schedule.open.js","page-return.js","score-edition.js","shiftMatch.js","import.js","close.pool.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/FA;AACA;AACA;AACA;AACA;AACA;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"all.js","sourcesContent":["$( document ).ready(function() {\r\n\t// Create custom delete alert when we click on a .button-delete\r\n\t// @author Dessaules Loïc\r\n\t// @modified by Dessauges Antoine\r\n\t$('.button-delete').click(function(){\r\n\r\n\t\tevent.preventDefault(); // cancel the event click, needed to delte participant in team. Without the form is sumbit on icon click\r\n\r\n\t\tvar type = $(this).data(\"type\");\r\n\t\tvar name = $(this).data(\"name\");\r\n\t\tvar title = '';\r\n\t\tvar text = '';\r\n\t\tvar form = $(this).parent();\r\n\r\n\t\tswitch(type) {\r\n\t\t    case \"sport\":\r\n\t\t    \ttitle = \"Voulez-vous vraiment supprimer le sport \\\"\"+name+\"\\\"?\";\r\n\t\t        text = \"La suppression de ce sport va entrainer la suppression des courts liés\";\r\n\t\t        break;\r\n\t        case \"court\":\r\n\t        \ttitle = \"Voulez-vous vraiment supprimer le terrain \\\"\"+name+\"\\\"?\";\r\n\t\t        break;\r\n\t\t    case \"tournament\":\r\n\t\t    \ttitle = \"Voulez-vous vraiment supprimer le tournois \\\"\"+name+\"\\\" ?\";\r\n\t\t        break;\r\n\t      \tcase \"teamMember\":\r\n\t\t    \ttitle = \"Voulez-vous vraiment supprimer \\\"\"+name+\"\\\" de cette équipe ?\";\r\n\t\t        break;\r\n\t\t    case \"memberTeam\":\r\n\t\t    \ttitle = \"Voulez-vous vraiment retirer \"+name+\" ?\";\r\n\t\t        break;\r\n\t\t}\r\n\t\t\r\n\t\talertConfirm(form, title, text);\r\n\r\n\t\t});\r\n\r\n\r\n\t\t// Open confirm pop-up when select change\r\n\t  \t// @author Dessauges Antoine\r\n\t  \t$( \".addMember\" ).change(function() {\r\n\r\n\t\t\tvar name = $(this).find(\"option:selected\").text();\r\n\t\t\tvar form = $(this).parent();\r\n\t\t\tif($(this).attr(\"name\") == \"team\")\r\n\t\t\t\tvar title = \"Voulez-vous ajouter ce participant à l'équipe \\\"\"+name+\"\\\" ?\";\r\n\t\t\telse\r\n\t  \t\t\tvar title = \"Voulez-vous ajouter \\\"\"+name+\"\\\" à l'équipe ?\";\r\n\r\n\t\t  \talertConfirm(form, title, '');\r\n\r\n\t\t});\r\n\r\n\r\n\t\t// Display the popup\r\n\t\tfunction alertConfirm(form, title, text){\r\n\t\t\tswal({\r\n\t\t  \ttitle: title,\r\n\t\t  \ttext: text,\r\n\t\t  \ttype: \"warning\",\r\n\t\t  \tshowCancelButton: true,\r\n\t\t  \tcancelButtonText: \"Annuler\",\r\n\t  \t\tconfirmButtonColor: \"#DD6B55\",\r\n\t\t  \tconfirmButtonText: \"Confirmer\",\r\n\t\t  \tcloseOnConfirm: false\r\n\t\t},\r\n\t\tfunction(isConfirm){\r\n\t\t\tif(isConfirm){\r\n\t\t\t\t$(form).submit();\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tif ($(\".addMember\")[0]) //if class exit on this page\r\n\t\t\t\t\t$('.addMember').find(\"option\")[0].selected = true;//display defaut select\r\n\t\t\t}\r\n\r\n\t\t});\r\n\t}\r\n\r\n});\r\n","$( document ).ready(function() {\r\n\t// Shows dev on footer\r\n\t$('.show-devs').click(function() {\r\n\t\tif ($('.dev-names').hasClass('hide')) {\r\n\t\t\t$('.dev-names').removeClass('hide').addClass('show');\r\n\t\t}\r\n\t\telse {\r\n\t\t\t$('.dev-names').removeClass('show').addClass('hide');\r\n\t\t}\r\n\t});\r\n});","$( document ).ready(function() {\r\n\t/* FORM VALIDATIONS */\r\n\t// @author Dessaules Loïc\r\n\t$('.formSend').click(function(){\r\n\t\tvar form = $(this).parent().parent();\r\n\t\tvar formId = form.attr('id');\r\n\t\tvar error = '';\r\n\r\n\t\tswitch(formId) {\r\n\t\t    case \"formSport\":\r\n\t\t    \tvar nameValue = $('#formSport #name').val();\r\n\t\t    \tvar descriptionValue = $('#formSport #description').val();\r\n\r\n\t\t    \tvar patternName = /^[a-zA-Z0-9-_ ]{3,20}$/;\r\n\t\t    \tvar patternDecription = /^[a-zA-Z0-9-_ ]{0,45}$/;\r\n\r\n\t\t    \tif(!patternName.test(nameValue)){\r\n\t\t    \t\terror += 'Le champ Nom ne doit pas être vide et doit avoir entre 3 et 45 caractères.<br>';\r\n\t\t    \t}\r\n\t\t    \tif(!patternDecription.test(descriptionValue)){\r\n\t\t    \t\terror += 'Le champ Description peut avoir maximum 45 caractères.<br>';\r\n\t\t    \t}\r\n\t\t        break;\r\n\r\n\t        case \"formCourt\":\r\n\t        \tvar nameValue = $('#formCourt #name').val();\r\n\t        \tvar acronymValue = $('#formCourt #acronym').val();\r\n\t\t    \tvar sportValue = $('#formCourt #sport').val(); // '' = empty, 1-2-3-... = sport\r\n\r\n\t\t    \tvar patternName = /^[a-zA-Z0-9-_ ]{1,20}$/;\r\n\t\t    \tvar patternAcronym = /^[a-zA-Z0-9-_ ]{3,3}$/;\r\n\t\t    \tvar patternSport = /^[0-9]+$/;\r\n\r\n\t\t    \tif(!patternName.test(nameValue)){\r\n\t\t    \t\terror += 'Le champ Nom ne doit pas être vide et doit avoir entre 1 et 20 caractères.<br>';\r\n\t\t    \t}\r\n\t\t    \tif(!patternAcronym.test(acronymValue)){\r\n\t\t    \t\terror += 'Le champ Acronym ne doit pas être vide et doit avoir 3 caractères.<br>';\r\n\t\t    \t}\r\n\t\t    \tif(!patternSport.test(sportValue)){\r\n\t\t    \t\terror += 'Aucun sport sélectionné.<br>';\r\n\t\t    \t}\r\n\t\t        break;\r\n\r\n\t\t    case \"formEvent\":\r\n\t        \tvar nameValue = $('#formEvent #name').val();\r\n\t        \tvar imgValue = $('#formEvent #img').val();\r\n\r\n\t\t    \tvar patternName = /^[a-zA-Z0-9-_ ]{3,20}$/;\r\n\r\n\t\t    \tif(!patternName.test(nameValue)){\r\n\t\t    \t\terror += 'Le champ Nom ne doit pas être vide et doit avoir entre 3 et 20 caractères.<br>';\r\n\t\t    \t}\r\n\t\t    \t//if image is not empty but only if this is on the create event (edit event image can be null and conserve the oldest image)\r\n\t\t    \tif(imgValue == '' && $('#formEvent').is('.add')){\r\n\t\t    \t\terror += 'Le champ Image ne doit pas être vide.<br>';\r\n\t\t    \t}\r\n\r\n\t\t        break;\r\n\r\n\t\t    case \"formTournament\":\r\n\t\t    \tvar nameValue = $('#formTournament #name').val();\r\n\t\t    \tvar sportValue = $('#formTournament #sport').val();\r\n\t\t    \tvar startDateValue = $('#formTournament #startDate').val();\r\n\t\t    \tvar startTimeValue = $('#formTournament #startTime').val();\r\n\t\t    \tvar imgValue = $('#formTournament #img').val();\r\n\r\n\t\t    \tvar patternName = /^[a-zA-Z0-9-_ ]{3,45}$/;\r\n\t\t    \tvar patternSport = /^[0-9]+$/; // '' = empty, 1-2-3-... = sport\r\n\t\t    \tvar patternDate = /^[0-9]{4}-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])$/;\r\n\t\t    \tvar patternTime = /^([01]\\d|2[0-3]):([0-5]\\d)$/;\r\n\r\n\t\t    \tif(!patternName.test(nameValue)){\r\n\t\t    \t\terror += 'Le champ Nom ne doit pas être vide et doit avoir entre 3 et 45 caractères.<br>';\r\n\t\t    \t}\r\n\t\t    \tif(!patternSport.test(sportValue)){\r\n\t\t    \t\terror += 'Aucun sport sélectionné.<br>';\r\n\t\t    \t}\r\n\t\t    \tif(!patternTime.test(startTimeValue)){\r\n\t\t    \t\terror += 'Le champ Heure de début ne doit pas être vide et doit être sous la forme hh:mm.<br>';\r\n\t\t    \t}\r\n\t\t    \tif(!patternDate.test(startDateValue)){\r\n\t\t    \t\terror += 'Le champ Date de début ne doit pas être vide et doit être sous la forme jj.mm.aaaa.<br>';\r\n\t\t    \t}\r\n\t\t    \t//if image is not empty but only if this is on the create event (edit event image can be null and conserve the oldest image)\r\n\t\t    \tif(imgValue == '' && $('#formTournament').is('.add')){\r\n\t\t    \t\terror += 'Le champ Image ne doit pas être vide.<br>';\r\n\t\t    \t}\r\n\t\t    \tbreak;\r\n\t\t}\r\n\r\n\t\tif(error == ''){\r\n\t\t\tform.submit();\r\n\t\t}else{\r\n\t\t\t$('.alert').remove();\r\n\t\t\t$('.alert-danger').remove();\r\n\t\t\t$('h1').after(\r\n\t\t\t\t'<div class=\"alert alert-danger\">'\r\n\t\t\t\t+error\r\n\t\t\t\t+'</div>'\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t});\r\n});","$( document ).ready(function() {\r\n    // Login popup\r\n    $(\"#login_link\").click(function() {\r\n    \t$('#login_popup').modal();\r\n    \t$(\"#login_popup .modal-body .error\").remove();\r\n    });\r\n    // Set focus when the popup loaded\r\n    $('#login_popup').on('shown.bs.modal', function(){\r\n    \t$(\"#username\").focus();\r\n    })\r\n\r\n\r\n    $(\"#login_popup .btn-login-form\").click(function(event){\r\n    \tevent.preventDefault();\r\n    \tvar username = $(\"#login-form #username\").val();\r\n    \tvar password = $(\"#login-form #password\").val();\r\n    \tvar token = $(\"#login-form input[name=_token]\").val();\r\n    \t\r\n    \t// Ajaj Posting data\r\n      \t$.ajax({\r\n            url         : '/admin',\r\n            method      : 'POST',\r\n            dataType    : 'html',\r\n            headers\t\t: {'X-CSRF-TOKEN': token},\r\n            data        : {\r\n                username: username,\r\n                password: password,\r\n            },\r\n            success : function(data) {\r\n                var res = data.split(\"::\");\r\n                if(res[0] == \"accepted\"){\r\n                \twindow.location.href = res[1];\r\n                }else{\r\n                \tvar error = res[1];\r\n                \t$(\"#login_popup .modal-body .error\").remove();\r\n                \t$(\"#login_popup .modal-body\").append('<div class=\"error\">'+error+'</div>');\r\n            \t \t$(\"#login-form #password\").val(\"\");\r\n                }\r\n            }\r\n        });\r\n    });\r\n});","$( document ).ready(function() {\r\n\t/* Add multiple select chooser for the teams which participate on a tournament */\r\n\t// do this if we are on the good page (id of the select exists)\r\n\tif($('#multiple-teams-select').length){\r\n\t\t$(\"#multiple-teams-select\").select2({\r\n\t\t\tplaceholder: 'Choisir une équipe',\r\n\t  \t\tallowClear: true\r\n\t  \t});\r\n\t}\r\n});","$( document ).ready(function() {\r\n\r\n\t// Search in a table and display only result who correspond to the search\r\n  \t// @author Dessauges Antoine\r\n  \t$('.search').on('input',function(e){\r\n\r\n    \tvar search = $('.search').val().toLowerCase();\r\n\r\n    \t$('.searchIn tr, .searchIn .hideSearch').each( function() {\r\n\r\n    \t\tvar teamName = $(this).find(\".name\").text().toLowerCase();\r\n\r\n    \t\tif(teamName.indexOf(search) < 0)\r\n    \t\t\t$(this).hide( \"fast\");\r\n    \t\telse\r\n    \t\t\t$(this).show( \"fast\");\r\n\r\n    \t});\r\n\r\n    });\r\n\r\n\r\n\t// Init Datatable on our table -> https://datatables.net/\r\n    // @author Dessaules Loïc\r\n\tvar tableFrTranslateWithoutAllInfos = {\r\n\t\t\"language\": {\r\n\t        \"decimal\":        \"\",\r\n\t\t    \"emptyTable\":     \"Aucune données disponible\",\r\n\t\t    \"info\":           \"_START_ à _END_ sur _TOTAL_ entrées\",\r\n\t\t    \"infoEmpty\":      \"0 à 0 sur 0 entrées\",\r\n\t\t    \"infoFiltered\":   \"(Total de _MAX_ total entrées)\",\r\n\t\t    \"infoPostFix\":    \"\",\r\n\t\t    \"thousands\":      \",\",\r\n\t\t    \"lengthMenu\":     \"Voir _MENU_ entrée\",\r\n\t\t    \"loadingRecords\": \"Chargement...\",\r\n\t\t    \"processing\":     \"En traitement...\",\r\n\t\t   \t\"search\":         \"\",\r\n\t\t    \"searchPlaceholder\": \"Recherche\",\r\n\t\t    \"zeroRecords\":    \"Aucune données trouvées\",\r\n\t\t    \"paginate\": {\r\n\t\t        \"first\":      \"Première\",\r\n\t\t        \"last\":       \"Dernière\",\r\n\t\t        \"next\":       \"Suivant\",\r\n\t\t        \"previous\":   \"Précédent\"\r\n\t\t    }\r\n\t    },\r\n\t    \"paging\":   false,\r\n        \"info\":     false,\r\n        \"searching\":\tfalse,\r\n\t};\r\n\r\n\tvar tableFrTranslateWithoutEntries = {\r\n\t\t\"language\": {\r\n\t        \"decimal\":        \"\",\r\n\t\t    \"emptyTable\":     \"Aucune données disponible\",\r\n\t\t    \"info\":           \"_START_ à _END_ sur _TOTAL_ entrées\",\r\n\t\t    \"infoEmpty\":      \"0 à 0 sur 0 entrées\",\r\n\t\t    \"infoFiltered\":   \"(Total de _MAX_ total entrées)\",\r\n\t\t    \"infoPostFix\":    \"\",\r\n\t\t    \"thousands\":      \",\",\r\n\t\t    \"lengthMenu\":     \"Voir _MENU_ entrée\",\r\n\t\t    \"loadingRecords\": \"Chargement...\",\r\n\t\t    \"processing\":     \"En traitement...\",\r\n\t\t    \"search\":         \"\",\r\n\t\t    \"searchPlaceholder\": \"Recherche\",\r\n\t\t    \"zeroRecords\":    \"Aucune données trouvées\",\r\n\t\t    \"paginate\": {\r\n\t\t        \"first\":      \"Première\",\r\n\t\t        \"last\":       \"Dernière\",\r\n\t\t        \"next\":       \"Suivant\",\r\n\t\t        \"previous\":   \"Précédent\"\r\n\t\t    }\r\n\t    },\r\n        \"bLengthChange\":     false,\r\n\t};\r\n\r\n\t// Specific table without the top-left élément (nb x - y entries)\r\n\t$('#tournament-teams-table').DataTable(tableFrTranslateWithoutEntries);\r\n\t$('#teams-table').DataTable(tableFrTranslateWithoutEntries);\r\n\t$('#participants-table').DataTable(tableFrTranslateWithoutEntries);\r\n\t// All tables without all data, just the table\r\n\t$('.translate').DataTable(tableFrTranslateWithoutAllInfos);\r\n\r\n\t// datatables add a container fluid, I don't want that, so I delete the class\r\n\t$('.dataTables_wrapper').removeClass('container-fluid');\r\n\r\n\t// Redirect when click on a cell\r\n\t$('#pools-table tr td.clickable').click(function(){\r\n\t\tvar tournament_id = $(\"#pools-table\").data(\"tournament\");\r\n\t\tvar pool_id = $(this).data(\"id\");\r\n\t\twindow.location.href = tournament_id+\"/pools/\"+pool_id;\r\n\t});\r\n\r\n\t$('#teams-table tr td.clickable').click(function(){\r\n\t\tvar team_id = $(this).data(\"id\");\r\n\t\twindow.location.href = \"teams/\"+team_id;\r\n\t});\r\n\r\n\t$('#teams-show-table tr td.clickable').click(function(){\r\n\t\tvar participant_id = $(this).data(\"id\");\r\n\t\twindow.location.href = \"/admin/participants/\"+participant_id;\r\n\t});\r\n\r\n\t$('#participants-table tr td.clickable').click(function(){\r\n\t\tvar participant_id = $(this).data(\"id\");\r\n\t\twindow.location.href = \"participants/\"+participant_id;\r\n\t});\r\n\r\n\t$('#participants-show-table tr td.clickable').click(function(){\r\n\t\tvar team_id = $(this).data(\"id\");\r\n\t\twindow.location.href = \"/admin/teams/\"+team_id;\r\n\t});\r\n\r\n\t$('#tournament-teams-table tr td.clickable').click(function(){\r\n\t\tvar team_id = $(this).data(\"id\");\r\n\t\twindow.location.href = \"/admin/teams/\"+team_id;\r\n\t});\r\n});\r\n","$(document).ready(function() {\r\n    $('.big-screen').click(function(e) {\r\n        e.preventDefault();\r\n\r\n        console.log($(this).attr(\"href\"));\r\n\r\n        window.open($(this).attr(\"href\"), \"_blank\", \"height=\" + screen.height +\",width=\" + screen.width + \"\");\r\n    });\r\n});\r\n","$(document).ready(function() {\r\n    $('.return').each(function() {\r\n        $(this).click(function(event) {\r\n            event.preventDefault();\r\n            history.back();\r\n        });\r\n    })\r\n});\r\n","$( document ).ready(function() {\r\n\t$(\"table#matches td.action i.fa-pencil\").click(function() {\r\n\t\tunlockScore($(this));\r\n\t});\r\n\r\n\tfunction unlockScore(pencil){\r\n\t\tvar tdAction = pencil.parent();\r\n\t\tvar tdScore1 = tdAction.parent().children(\"td.score1\");\r\n\t\tvar tdScore2 = tdAction.parent().children(\"td.score2\");\r\n\t\t// Get scores of each team\r\n\t\tvar score1 = tdScore1.text();\r\n\t\tvar score2 = tdScore2.text();\r\n\t\t// Clear the TDs\r\n\t\ttdScore1.empty();\r\n\t\ttdScore2.empty();\r\n\t\t// Create form inputs\r\n\t\tvar inputScore1 = document.createElement(\"input\");\r\n\t\tinputScore1.setAttribute('type',\"number\");\r\n\t\tinputScore1.setAttribute('min',\"0\");\r\n\t\tinputScore1.setAttribute('value',score1);\r\n\t\tvar inputScore2 = document.createElement(\"input\");\r\n\t\tinputScore2.setAttribute('type',\"number\");\r\n\t\tinputScore2.setAttribute('min',\"0\");\r\n\t\tinputScore2.setAttribute('value',score2);\r\n\t\t// Append\r\n\t\ttdScore1.append(inputScore1);\r\n\t\ttdScore2.append(inputScore2);\r\n\t\t// Create and delete icons\r\n\t\tvar checkSquare = document.createElement(\"i\");\r\n\t\tcheckSquare.className += \"fa fa-lg fa-check-square-o\";\r\n\t\tcheckSquare.setAttribute('aria-hidden',\"true\");\r\n\t\tvar cross = document.createElement(\"i\");\r\n\t\tcross.className += \"fa fa-lg fa-times\";\r\n\t\tcross.setAttribute('aria-hidden',\"true\");\r\n\t\tpencil.after(checkSquare);\r\n\t\tcheckSquare.after(cross);\r\n\r\n\t\tpencil.remove();\r\n\r\n\t\t// Discard all things\r\n\t\t$(cross).click(function(){\r\n\t\t\t// Remove square and cross icons and recreate pencil icon\r\n\t\t\ttdAction.append(pencil);\r\n\t\t\tcheckSquare.remove();\r\n\t\t\tcross.remove();\r\n\t\t\t// Remove inputs\r\n\t\t\tinputScore1.remove();\r\n\t\t\tinputScore2.remove();\r\n\t\t\t// Place old score on the TDs\r\n\t\t\ttdScore1.append(score1);\r\n\t\t\ttdScore2.append(score2);\r\n\r\n\t\t\t// Add listener to new pencil recreate\r\n\t\t\tpencil.click(function(){\r\n\t\t\t\tunlockScore($(this));\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\t$(checkSquare).click(function(){\r\n\t\t\t// Success\r\n\t\t\tif(valid($(inputScore1).val(), $(inputScore2).val())){\r\n\t\t\t\tajaxCall(tdAction);\r\n\t\t\t}\r\n\t\t\t// Error\r\n\t\t\telse{\r\n\t\t\t\tdisplayAlert(\"danger\", \"Format de score invalide\");\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t\r\n\tfunction displayAlert(type, message){\t\r\n\t\t$(\".alert\").remove();\r\n\r\n\t\tswitch(type) {\r\n\r\n\t    \tcase \"danger\":\r\n\r\n\t\t\t\tvar errorAlert = $(\"<div class='alert alert-danger' role='alert'>\"+message+\"</div>\");\r\n\t\t\t\t$(\"#match-block\").prepend(errorAlert);\r\n\t\t\t\t// After 2sec, the alert will disappear\r\n\t\t\t\tdisappear(errorAlert);\r\n\t\t        break;\r\n\r\n\t\t    case \"success\":\r\n\r\n\t\t\t\tvar success = $(\"<div class='alert alert-success' role='alert'>\"+message+\"</div>\");\r\n\t\t\t\t$(\"#match-block\").prepend(success);\r\n\t\t\t\t// After 2sec, the alert will disappear\r\n\t\t\t\tdisappear(success);\r\n\t\t        break;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction valid(score1, score2){\r\n\t\tvar patternNumeric = /^[0-9]{1,3}$/;\r\n\t\tif(!patternNumeric.test(score1) || !patternNumeric.test(score2)){\r\n    \t\treturn false;\r\n    \t}else{\r\n    \t\treturn true;\r\n    \t}\r\n\t}\r\n\r\n\tfunction disappear(alert){\r\n\t\talert.fadeTo(3000, 500).slideUp(500, function(){\r\n\t\t    alert.slideUp(500);\r\n\t\t});\r\n\t}\r\n\r\n\tfunction ajaxCall(tdAction){\r\n\r\n\t\tvar tournamentId = $(\"table#matches\").data(\"tournament\");\r\n\t\tvar poolId = $(\"table#matches\").data(\"pool\");\r\n\t\tvar gameId = tdAction.parent().data(\"game\");\r\n\r\n\t\t// Create the loader\r\n\t\tvar opac = document.createElement(\"div\");\r\n\t\topac.id += \"opac\";\r\n\t\tvar imgLoader = document.createElement('img');\r\n\t\timgLoader.className += \"loader\";\r\n\t\timgLoader.src = '/images/loader.gif';\r\n\t\topac.prepend(imgLoader);\r\n\t\tdocument.body.prepend(opac);\r\n\r\n\t\t$.ajax({\r\n            url         : '/admin/tournaments/'+tournamentId+'/pools/'+poolId+'/games/'+gameId+'',\r\n            method      : 'PUT',\r\n            dataType    : 'json',\r\n            cache       : false,\r\n            headers     : {            \r\n                'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')        \r\n            },\r\n            data        : {\r\n        \t\tscore1 : tdAction.parent().children(\"td.score1\").children(\"input\").val(),\r\n        \t\tscore2 : tdAction.parent().children(\"td.score2\").children(\"input\").val()\r\n            },\r\n            error : function(xhr, options, ajaxError) {\r\n            \tif(xhr.status != 200){\r\n            \t\tdisplayAlert(\"danger\", \"Une erreur est survenue ...\");\r\n            \t}\r\n            \t// Remove loader\r\n\t\t\t\topac.remove();\r\n            },\r\n            success : function(data) {\r\n            \t// Create new pencil icon\r\n            \tvar pencil = document.createElement(\"i\");\r\n\t\t\t\tpencil.className += \"fa fa-lg fa-pencil\";\r\n\t\t\t\tpencil.setAttribute('aria-hidden',\"true\");\r\n\r\n\t\t\t\t// Create variable i will use\r\n\t\t\t\tvar tdScore1 = tdAction.parent().children(\"td.score1\");\r\n\t\t\t\tvar tdScore2 = tdAction.parent().children(\"td.score2\");\r\n\t\t\t\tvar pencil = $(pencil);\r\n                var checkSquare = tdAction.children(\"i.fa-check-square-o\");\r\n                var cross = tdAction.children(\"i.fa-times\");\r\n\r\n\t\t\t\t// Remove square and cross icons and add pencil icon\r\n\t\t\t\ttdAction.append(pencil);\r\n\t\t\t\tcheckSquare.remove();\r\n\t\t\t\tcross.remove();\r\n\r\n\t\t\t\t// Place new score on the TDs\r\n\t\t\t\ttdScore1.append(tdScore1.children(\"input\").val());\r\n\t\t\t\ttdScore2.append(tdScore2.children(\"input\").val());\r\n\r\n\t\t\t\t// Remove inputs\r\n\t\t\t\ttdScore1.children(\"input\").remove();\r\n\t\t\t\ttdScore2.children(\"input\").remove();\r\n\r\n\t\t\t\t// Add listener to new pencil recreate\r\n\t\t\t\tpencil.click(function(){\r\n\t\t\t\t\tunlockScore($(this));\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// Update the rankings table\r\n\t\t\t\tupdateRankingstable(data);\r\n\r\n\t\t\t\t// Display success message\r\n\t\t\t\tdisplayAlert(\"success\", \"Changement effectué et classement mis à jour\")\r\n\r\n\t\t\t\t// Remove loader\r\n\t\t\t\topac.remove();\r\n            }\r\n        });\r\n\t}\r\n\r\n\tfunction updateRankingstable(rankings){\r\n\t\t// Clear the Tbdy and rebuilt it\r\n\t\tvar tBody = $(\"#pool-rankings-table tbody\");\r\n\t\ttBody.empty();\r\n\t\tfor (var i = 0; i < rankings.length; i++) {\r\n\t\t\ttr = document.createElement(\"tr\");\r\n\t\t\tallTds = '<td>'+(i+1)+'</td><td>'+rankings[i][\"team\"]+'</td><td>'+rankings[i][\"score\"]+'</td><td>'+rankings[i][\"W\"]+'</td><td>'+rankings[i][\"L\"]+'</td><td>'+rankings[i][\"D\"]+'</td><td>'+rankings[i][\"+-\"]+'</td>';\r\n\t\t\ttr.innerHTML = allTds;\r\n\t\t\ttBody.append(tr);\r\n\t\t}\r\n\t\t\r\n\t}\r\n\r\n\r\n});","$( document ).ready(function() {\r\n\r\n\t$(\"#shiftMatch\").click(function() {\r\n\r\n\t\tevent.preventDefault(); // cancel the event\r\n\t\tshiftMatch($(this));\r\n\t});\r\n\r\n\tfunction shiftMatch(self){\r\n\r\n\t\tvar shiftTime = $('#shiftTime').val();\r\n\r\n\t\t//if empty or numeric\r\n\t\tif(!(shiftTime % 1 === 0 && shiftTime != '')){\r\n\t\t\tdisplayAlert(\"danger\", \"Le décalage doit être un numéro entier qui correspond a un temps en minute...\");\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar matches = $('#matches tr .separator');\r\n\t\tvar tournamentId = $(\"table#matches\").data(\"tournament\");\r\n\t\tvar poolId = $(\"table#matches\").data(\"pool\");\r\n\r\n\t\tmatches.each(function()\r\n\t\t{\r\n\t\t\tvar gameId = $(this).parent().data(\"game\");\r\n\r\n\t\t    var oldTime = $(this).text();\r\n\r\n\t\t\tvar tempTime = oldTime.split(':');\r\n\t\t\tvar timeInSecond = tempTime[0] * 60 * 60 + tempTime[1] * 60 ; \r\n\r\n\t\t\t//add time\r\n\t\t\ttimeInSecond += (shiftTime * 60)\r\n\t\t\r\n\t\t\t//convert second in string HH:MM:SS\r\n\t\t\tvar newDate = new Date(null);\r\n\t\t\tnewDate.setTime( newDate.getTime() + newDate.getTimezoneOffset()*60*1000 ); // make timezone correcte\r\n\t\t\tnewDate.setSeconds(timeInSecond); \r\n\t\t\tvar result = newDate.toISOString().substr(11, 8);\r\n\r\n\t\t\t// create var for the dom display and for the DB , the 0 add in start and the slice fix the number for having 14:05:00 instead of 14:5:0\r\n\t\t\tvar timeDOM = ('0'+newDate.getHours()).slice(-2)+\":\"+('0'+newDate.getMinutes()).slice(-2);\r\n\t\t\tvar timeDB = ('0'+newDate.getHours()).slice(-2)+\":\"+('0'+newDate.getMinutes()).slice(-2)+\":\"+('0'+newDate.getSeconds()).slice(-2);\r\n\r\n\t\t\t$.ajax({\r\n\t            url         : '/admin/tournaments/'+tournamentId+'/pools/'+poolId+'/games/'+gameId,\r\n\t            method      : 'PUT',\r\n\t            context: this,\r\n\t            cache       : false,\r\n\t            headers     : {            \r\n\t                'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')        \r\n\t            },\r\n\t            data        : {\r\n\t        \t\tnewTime : timeDB,\r\n\t        \t\tnewTime : timeDB\r\n\t            },\r\n\t            error : function(xhr, options, ajaxError) {\r\n\t            \tif(xhr.status != 200){\r\n\t            \t\tdisplayAlert(\"danger\", \"Une erreur est survenue ...\");\r\n\t            \t}\r\n\t            },\r\n\t            success : function(data) {\r\n\t            \t$(this).text(timeDOM);\r\n\t            }\r\n\t        });\r\n\r\n\t\t});\r\n\r\n\t\r\n\r\n\t} //shiftMatch\r\n\r\n\tfunction displayAlert(type, message){\t\r\n\t\t$(\".alert\").remove();\r\n\r\n\t\tswitch(type) {\r\n\r\n\t    \tcase \"danger\":\r\n\r\n\t\t\t\tvar errorAlert = $(\"<div class='alert alert-danger' role='alert'>\"+message+\"</div>\");\r\n\t\t\t\t$(\"#match-block\").prepend(errorAlert);\r\n\t\t\t\t// After 2sec, the alert will disappear\r\n\t\t\t\tdisappear(errorAlert);\r\n\t\t        break;\r\n\r\n\t\t    case \"success\":\r\n\r\n\t\t\t\tvar success = $(\"<div class='alert alert-success' role='alert'>\"+message+\"</div>\");\r\n\t\t\t\t$(\"#match-block\").prepend(success);\r\n\t\t\t\t// After 2sec, the alert will disappear\r\n\t\t\t\tdisappear(success);\r\n\t\t        break;\r\n\t\t}\r\n\t}\r\n\r\n});","$(document).ready(function() {\r\n    $(\".import\").click(function() {\r\n        $(this).parent().submit();\r\n    });\r\n});\r\n","$(document).ready(function() {\r\n    $('.close-pool-btn').click(function() {\r\n\r\n        var tournament_id = $(\"table#matches\").data(\"tournament\");\r\n        var pool_id       = $(\"table#matches\").data(\"pool\");\r\n\r\n        $(\"#pool-rankings-table tbody tr\").each(function() {\r\n\r\n            $.ajax({\r\n                url         : '/admin/tournaments/' + tournament_id + '/pools/' + pool_id,\r\n                method      : 'PUT',\r\n                dataType    : 'json',\r\n                cache       : false,\r\n                headers     : {\r\n                    'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\r\n                },\r\n                data        : {\r\n                    team_id         : $(this).data(\"id\"),\r\n                    rank_in_pool    : $(this).data(\"rank\")\r\n                },\r\n                success : function(data) {\r\n\r\n                    if (!$('.alert.alert-success').length) {\r\n                        // Display success message\r\n                        let success = $(\"<div class='alert alert-success' role='alert'>Le pool à bien été terminé</div>\");\r\n                        $(\"#match-block\").prepend(success);\r\n                        // After 2sec, the alert will disappear\r\n                        success.fadeTo(3000, 500).slideUp(500, function(){\r\n                \t\t    success.slideUp(500);\r\n                \t\t});\r\n                    }\r\n\r\n                    $('.action').each(function() {\r\n                        $(this).remove();\r\n                    });\r\n                },\r\n                error : function(xhr) {\r\n                    console.error(`readyState:      ${xhr.readyState}`);\r\n                    console.error(`status:          ${xhr.status}`);\r\n                    console.error(`responseText:    ${xhr.responseText}`);\r\n                }\r\n            });\r\n        });\r\n    });\r\n});\r\n"]}